{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/item.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../shopping-item/shopping-item.component\";\nimport * as i4 from \"../total/total.component\";\nfunction ItemsComponent_app_shopping_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-shopping-item\", 3);\n    i0.ɵɵlistener(\"deleteItem\", function ItemsComponent_app_shopping_item_2_Template_app_shopping_item_deleteItem_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteItem($event));\n    })(\"toggleItem\", function ItemsComponent_app_shopping_item_2_Template_app_shopping_item_toggleItem_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.toggleItem($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"item\", item_r1);\n  }\n}\nexport let ItemsComponent = /*#__PURE__*/(() => {\n  class ItemsComponent {\n    constructor(itemService) {\n      this.itemService = itemService;\n      this.total = 0;\n    }\n    ngOnInit() {\n      /* this.items = [\r\n        {\r\n          id: 0,\r\n          title: 'manzana',\r\n          price: 20,\r\n          quantity: 4,\r\n          completed: false\r\n        },\r\n        {\r\n          id: 0,\r\n          title: 'leche',\r\n          price: 20,\r\n          quantity: 4,\r\n          completed: true\r\n        }\r\n      ];*/\n      //this.items = this.itemService.getItems();\n      //\n      this.itemService.getItems().subscribe(items => {\n        this.items = items;\n        this.getTotal();\n      });\n    }\n    deleteItem(item) {\n      this.items = this.items.filter(i => i.id != item.id);\n      this.itemService.deleteItem(item).subscribe();\n      this.getTotal();\n    }\n    addItem(item) {\n      console.log(item);\n      this.itemService.addItem(item).subscribe(i => {\n        this.items.unshift(i);\n        this.getTotal();\n      });\n    }\n    toggleItem(item) {\n      this.itemService.toggleCompleted(item).subscribe(i => {});\n      this.getTotal();\n    }\n    getTotal() {\n      this.total = this.items.filter(item => item.completed === false).map(item => item.price * item.quantity).reduce((acc, item) => acc += item, 0);\n    }\n  }\n  ItemsComponent.ɵfac = function ItemsComponent_Factory(t) {\n    return new (t || ItemsComponent)(i0.ɵɵdirectiveInject(i1.ItemService));\n  };\n  ItemsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemsComponent,\n    selectors: [[\"app-items\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[\"id\", \"main-container\"], [\"mensaje\", \"Total a pagar: \", 3, \"total\"], [3, \"item\", \"deleteItem\", \"toggleItem\", 4, \"ngFor\", \"ngForOf\"], [3, \"item\", \"deleteItem\", \"toggleItem\"]],\n    template: function ItemsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-total\", 1);\n        i0.ɵɵtemplate(2, ItemsComponent_app_shopping_item_2_Template, 1, 1, \"app-shopping-item\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"total\", ctx.total);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.items);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.ShoppingItemComponent, i4.TotalComponent],\n    styles: [\"#main-container[_ngcontent-%COMP%]{width:800px;margin:0 auto}@media screen and (max-width: 800px){#main-container[_ngcontent-%COMP%]{width:100%}}\"]\n  });\n  return ItemsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}